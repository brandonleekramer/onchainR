---
title: "Untitled"
output: html_document
date: '2023-09-16'
---

```{r}

# https://www.covalenthq.com/docs/api/

library(tidyverse)

covalent_wallet_data = function(api_key, wallet_address){
  
  library(httr)
  library(jsonlite)
  call <- paste0("https://api.covalenthq.com/v1/1/address/",
                wallet_address,"/transactions_v2/?&key=",api_key)
  covalent_data <- GET(url = call)
  covalent_data <- content(covalent_data, "text", encoding = "UTF-8")
  covalent_data <- fromJSON(covalent_data, flatten = TRUE)
  covalent_data <- as.data.frame(covalent_data$data$items)
  covalent_data
}

my_api_key = "cqt_rQqVcqmBcrDbWhKCqmWhKvxPx4Ff"
my_wallet_address = "0xD4689dF10d248FDDC4C16fb6Aa1cD30585aAdB0C"

my_wallet_data = covalent_wallet_data(my_api_key, my_wallet_address)

my_wallet_data %>% 
  select(block_signed_at, from_address, to_address, pretty_value_quote, pretty_gas_quote)

```


